# Настройка Telegram-бота для формы обратной связи

Для того чтобы форма обратной связи на сайте могла отправлять сообщения в Telegram, необходимо выполнить следующие шаги:

## 1. Создание Telegram-бота

1. Найдите в Telegram бота @BotFather
2. Отправьте ему команду `/newbot`
3. Следуйте инструкциям для создания нового бота:
   - Придумайте имя для бота
   - Придумайте username (должен заканчиваться на `bot`)
4. После создания BotFather предоставит вам **токен** для бота, который будет выглядеть примерно так:
   ```
   1234567890:ABCdefGhIJKlmNoPQRsTUVwxyz
   ```

## 2. Получение ID чата

1. Найдите в Telegram бота @userinfobot
2. Отправьте ему любое сообщение
3. Он ответит информацией о вашем аккаунте, включая **ID чата**, который будет выглядеть примерно так:
   ```
   123456789
   ```

## 3. Настройка переменных окружения на VPS сервере

1. На вашем VPS сервере откройте файл `.env` в корне проекта
2. Замените `ваш_токен_бота` на токен, полученный от @BotFather
3. Замените `ваш_id_чата` на ID чата, полученный от @userinfobot

Пример заполненного файла `.env`:
```
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGhIJKlmNoPQRsTUVwxyz
TELEGRAM_CHAT_ID=123456789
PORT=3000
```

## 4. Структура файлов

Обработчик запросов для Telegram находится в файле:
```
/src/api/telegram-webhook.ts
```

Этот обработчик создает API endpoint по адресу:
```
/api/telegram-webhook
```

## 5. Перезапустите сервер

После добавления переменных окружения перезапустите ваш Node.js сервер, чтобы изменения вступили в силу.

## 6. Диагностика проблем

Если форма по-прежнему не работает:

1. Проверьте, что переменные окружения корректно установлены на вашем VPS сервере
2. Убедитесь, что бот активен и не заблокирован
3. Проверьте, что ID чата указан правильно
4. Убедитесь, что бот добавлен в чат, если вы используете групповой чат
5. Проверьте логи вашего Node.js сервера для получения дополнительной информации об ошибках

## Важные замечания

- Никогда не публикуйте токен бота в открытом виде
- Только администраторы чата могут получить ID чата напрямую
- Бот может отправлять сообщения только в чаты, куда его пригласили
- Убедитесь, что файл `.env` добавлен в `.gitignore`, чтобы не выкладывать его в открытый доступ

Теперь форма обратной связи на вашем сайте сможет отправлять сообщения в Telegram!